
name: "Install CI Fuzz"
description: "Installs cifuzz into the current workspace."
inputs:
  version: 
    description: "cifuzz version to install"
    required: true
    default: "latest"
  download_token:
    description: "Download token for the Code Intelligence download portal https://downloads.code-intelligence.com."
    required: true
runs:
  using: "composite"
  steps:
    - run: |
          if ! [ -x "$(command -v curl)" ]; then
            sudo apt update && sudo apt install -qy curl
          fi
          sh -c "$(curl -fsSL http://downloads.code-intelligence.com/assets/install-cifuzz.sh)" ${{ inputs.download_token }} ${{ inputs.version }}
          echo "PATH=$HOME/.local/share/cifuzz/bin:$PATH" >> $GITHUB_ENV
      shell: bash
